#include "executor.h"

/**
 * Execute a command using fork-exec-wait pattern
 *
 * @param command The command to execute (e.g., "ls")
 * @param args Array of arguments including command name, ending with NULL
 *             Example: {"ls", "-l", "/home", NULL}
 * @return Exit status of the command (0 for success, non-zero for failure)
 */

int execute_command(char *command, char **args) {
    pid_t pid;
    int status;


    pid = fork();
    if (pid < 0) {
     
        perror("fork");
        return -1;
    }

    
    if (pid == 0) {
        execvp(command, args);

      
        perror("execvp");
        exit(1);  
    }

  
    if (waitpid(pid, &status, 0) < 0) {
        perror("waitpid");
        return -1;
    }

    if (WIFEXITED(status)) {
        return WEXITSTATUS(status);
    } else {
        return -1;
    }
}
